(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(42).concat([function(e,t,a){e.exports=a(100)},,,,,function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),i=a.n(r),o=(a(47),a(5)),c=a(6),l=a(8),d=a(7),u=a(9),m=a(1),h=a(4),p=(a(52),a(104)),g=a(105),v=a(103),f=function(){return function(e){return fetch("/api/category").then(function(e){return e.json()}).then(function(t){return e({type:"LOAD_CATEGORIES",payload:t})})}},E=function(){return function(e){return fetch("/api/posts/status").then(function(e){return e.json()}).then(function(t){return e({type:"LOAD_STATUSES",payload:t})})}},O=function(e){return function(t){return fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"SEND_MESSAGE",payload:e.message})})}},b=a(102),y=a(101),C=(a(53),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={searchInput:""},a.searchRef=Object(n.createRef)(),a.handleSearchOnChange=a.handleSearchOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleOnSearchClick=a.handleOnSearchClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleSearchOnChange",value:function(e){var t=e.target.value;this.setState({searchInput:t})}},{key:"handleOnSearchClick",value:function(e){e.preventDefault(),this.props.searchPost(this.state.searchInput),this.props.history.push("/search/".concat(this.state.searchInput))}},{key:"componentDidMount",value:function(){this.searchRef.current.focus()}},{key:"render",value:function(){return s.a.createElement("div",{className:"searchWrap"},s.a.createElement("form",{className:"searchBar"},s.a.createElement("input",{ref:this.searchRef,onChange:this.handleSearchOnChange,"data-type":"searchInput",type:"text",value:this.state.searchInput,placeholder:"Search...",className:"search"}),s.a.createElement("input",{onClick:this.handleOnSearchClick,type:"submit",className:"submitButton",value:""})))}}]),t}(n.Component));C=Object(h.b)(function(e){return{}},function(e){return{searchPost:function(t){var a=function(e){return function(t){return fetch("/api/posts/search/".concat(e),{}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"SEARCH_POST",payload:e})})}}(t);return e(a)}}})(C);var N=Object(y.a)(C),j=(a(55),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).onLogout=a.onLogout.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onLogout",value:function(e){var t=this;e.preventDefault(),this.props.logout().then(function(){t.props.history.push("/")})}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.isLoggedIn,n=e.username;return s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"headerWrap"},s.a.createElement("div",{className:"titleWrap"},s.a.createElement("div",{className:"selectWrap",onClick:this.props.selectNav},s.a.createElement(b.a,{to:"/"},s.a.createElement("div",{className:"logo"},s.a.createElement("div",{className:"placeholderLogo"})),s.a.createElement("div",{className:"title"},t)))),s.a.createElement(N,null),s.a.createElement("div",{className:"loginStatusWrap"},a?s.a.createElement("div",{className:"loginStatus",onClick:this.props.selectNav},"Welcome back, ",n,"! ",s.a.createElement("span",{onClick:this.onLogout,className:"refLogin"},"Logout")):s.a.createElement("div",{className:"loginStatus",onClick:this.props.selectNav},"Need an account? ",s.a.createElement(b.a,{to:"/login",className:"refLogin"},"Log in here.")))))}}]),t}(n.Component));j=Object(h.b)(function(e){return{}},function(e){return{logout:function(t){return e(function(e){return fetch("/api/logout",{}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){return localStorage.removeItem("loggedIn"),localStorage.removeItem("username"),localStorage.removeItem("id"),localStorage.removeItem("isadmin"),e({type:"LOGOUT_USER",payload:t})}).catch(function(e){console.log(e)})})}}})(j);var S=Object(y.a)(j),I=(a(56),a(17)),k=a.n(I),T=(a(64),a(65),function(e){var t=e.id,a=e.name;return s.a.createElement("option",{value:t},"Category - ",a)}),_=function(e){var t=e.categories.map(function(e){return s.a.createElement(T,{key:e.id,id:e.id,name:e.name})});return s.a.createElement(s.a.Fragment,null,t)},M=function(e){var t=e.id,a=e.name;return s.a.createElement("option",{value:t},"Condition - ",a)},D=function(e){var t=e.postConditions.map(function(e){return s.a.createElement(M,{key:e.id,id:e.id,name:e.name})});return s.a.createElement(s.a.Fragment,null,t)},w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={title:"",description:"",price:"",photos:[],manufacturer:"",model:"",dimensions:"",notes:"",category_id:"",condition_id:"",isTitleInvalid:!0,isCategoryInvalid:!0,isConditionInvalid:!0},a.handleTitleOnChange=a.handleTitleOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleDescriptionOnChange=a.handleDescriptionOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handlePriceOnChange=a.handlePriceOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleManufacturerOnChange=a.handleManufacturerOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleModelOnChange=a.handleModelOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleDimensionsOnChange=a.handleDimensionsOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleNotesOnChange=a.handleNotesOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleFileChosenOnChange=a.handleFileChosenOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleCategoryOnChange=a.handleCategoryOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleConditionOnChange=a.handleConditionOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleOnSubmit=a.handleOnSubmit.bind(Object(m.a)(Object(m.a)(a))),a.checkTitleValid=a.checkTitleValid.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleTitleOnChange",value:function(e){var t=e.target.value;this.setState({title:t})}},{key:"checkTitleValid",value:function(){this.state.title.length<2?this.setState({isTitleInvalid:!0}):this.setState({isTitleInvalid:!1})}},{key:"handleDescriptionOnChange",value:function(e){var t=e.target.value;this.setState({description:t})}},{key:"handlePriceOnChange",value:function(e){var t=e.target.value;this.setState({price:t})}},{key:"handleManufacturerOnChange",value:function(e){var t=e.target.value;this.setState({manufacturer:t})}},{key:"handleModelOnChange",value:function(e){var t=e.target.value;this.setState({model:t})}},{key:"handleDimensionsOnChange",value:function(e){var t=e.target.value;this.setState({dimensions:t})}},{key:"handleNotesOnChange",value:function(e){var t=e.target.value;this.setState({notes:t})}},{key:"handleFileChosenOnChange",value:function(e){var t=e.target.files;this.setState({photos:t})}},{key:"handleCategoryOnChange",value:function(e){var t=this,a=e.target.value;this.setState({category_id:a},function(){""===t.state.category_id?t.setState({isCategoryInvalid:!0}):t.setState({isCategoryInvalid:!1})})}},{key:"handleConditionOnChange",value:function(e){var t=this,a=e.target.value;this.setState({condition_id:a},function(){""===t.state.condition_id?t.setState({isConditionInvalid:!0}):t.setState({isConditionInvalid:!1})})}},{key:"handleOnSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.title,s=a.description,r=a.price,i=a.photos,o=a.manufacturer,c=a.model,l=a.dimensions,d=a.notes,u=a.category_id,m=a.condition_id;this.props.onAdd({title:n,description:s,price:r,photos:i,manufacturer:o,model:c,dimensions:l,notes:d,category_id:u,post_condition_id:m}).then(function(e){t.props.closeModal()}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.price,r=e.manufacturer,i=e.model,o=e.dimensions,c=e.notes,l=e.isTitleInvalid,d=e.isCategoryInvalid,u=e.isConditionInvalid;return s.a.createElement("div",{className:"form-wrap"},s.a.createElement("form",{id:"add-post-form",encType:"multipart/form-data"},s.a.createElement("div",{className:"left-half"},s.a.createElement("input",{onChange:this.handleTitleOnChange,onKeyUp:this.checkTitleValid,type:"text",value:t,placeholder:"Title"}),s.a.createElement("textarea",{onChange:this.handleDescriptionOnChange,name:"description",value:a,placeholder:"Describe your post",cols:"30",rows:"10"}),s.a.createElement("input",{onChange:this.handlePriceOnChange,type:"text",value:n,placeholder:"Name your price"}),s.a.createElement("input",{onChange:this.handleManufacturerOnChange,type:"text",value:r,placeholder:"Manufacturer (Optional)"}),s.a.createElement("input",{onChange:this.handleModelOnChange,type:"text",value:i,placeholder:"Model (Optional)"}),s.a.createElement("input",{onChange:this.handleDimensionsOnChange,type:"text",value:o,placeholder:"Product dimensions (Optional)"}),s.a.createElement("input",{onChange:this.handleNotesOnChange,type:"text",value:c,placeholder:"Notes: Any last words?"})),s.a.createElement("div",{className:"right-half"},s.a.createElement("span",{className:"addImgText"},"Upload an image (max 6)"),s.a.createElement("img",{className:"sampleImg",src:"https://i.imgur.com/cFxAsBo.png",alt:"file not specified"}),s.a.createElement("input",{onChange:this.handleFileChosenOnChange,type:"file",form:"add-post-form",multiple:!0}),s.a.createElement("select",{onChange:this.handleCategoryOnChange,name:"category_id",id:"select-category"},s.a.createElement("option",{value:""},"Choose a Category"),s.a.createElement(_,{categories:this.props.categories})),s.a.createElement("select",{onChange:this.handleConditionOnChange,name:"condition_id",id:"select-conditions"},s.a.createElement("option",{value:""},"Choose a Condition"),s.a.createElement(D,{postConditions:this.props.postConditions})))),s.a.createElement("div",{className:"submit-add-wrap"},d||u||l?s.a.createElement("input",{className:"disabled",onClick:this.handleOnSubmit,type:"submit",value:"SUBMIT",form:"add-post-form",disabled:!0}):s.a.createElement("input",{onClick:this.handleOnSubmit,type:"submit",value:"SUBMIT",form:"add-post-form"})))}}]),t}(n.Component),x=w=Object(h.b)(function(e){return{postConditions:e.postConditions}},function(e){return{onAdd:function(t){var a=function(e){return function(t){var a=new FormData;for(var n in e)a.append(n,e[n]);for(var s=0;s<e.photos.length;s++)a.append("photos",e.photos[s]);return fetch("/api/posts",{method:"POST",body:a}).then(function(e){return e.json()}).then(function(e){t({type:"ADD_POST",payload:e})})}}(t);return e(a)}}})(w),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={showModal:!1},a.handleToggleModal=a.handleToggleModal.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleToggleModal",value:function(){return this.setState({showModal:!this.state.showModal})}},{key:"componentWillMount",value:function(){return this.props.loadFormData()}},{key:"render",value:function(){return s.a.createElement("div",{className:"newPostWrap"},s.a.createElement("div",{onClick:this.handleToggleModal,className:"textWrap"},s.a.createElement("span",{className:"text"},"+ New Post")),s.a.createElement(k.a,{isOpen:this.state.showModal,contentLabel:"modal",onRequestClose:this.handleToggleModal,className:"modal",overlayClassName:"overlay",shouldCloseOnOverlayClick:!0,ariaHideApp:!1},s.a.createElement("div",{className:"headerContainer"},s.a.createElement("span",{className:"headerText"},"MAKE A NEW POST")),s.a.createElement(x,{closeModal:this.handleToggleModal,categories:this.props.categories,postConditions:this.props.postConditions})))}}]),t}(n.Component),L=P=Object(h.b)(function(e){return{}},function(e){return{loadFormData:function(){var t=function(e){return fetch("/api/posts/condition").then(function(e){return e.json()}).then(function(t){return e({type:"LOAD_CONDITIONS",payload:t})})};e(t)}}})(P),A=function(e){var t=e.categories.map(function(t){var a=t.id,n=t.name;return s.a.createElement("li",{key:a,className:"navItem",onClick:e.selectNav},e.selected===n?s.a.createElement(b.a,{to:"/category/".concat(a),className:"text select"},n):s.a.createElement(b.a,{to:"/category/".concat(a),className:"text"},n))});return s.a.createElement("div",{className:"navigation"},s.a.createElement("div",{className:"navTitle"},s.a.createElement("span",{className:"text"},"Categories")),s.a.createElement("ul",{className:"navMenu"},t),e.isLoggedIn?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"navTitle"},s.a.createElement("span",{className:"text"},"Dashboard")),s.a.createElement("ul",{className:"navMenu"},s.a.createElement("li",{className:"navItem",onClick:e.selectNav},"Your Posts"===e.selected?s.a.createElement(b.a,{to:"/dashboard/your-posts",className:"text select"},"Your Posts"):s.a.createElement(b.a,{to:"/dashboard/your-posts",className:"text"},"Your Posts")),s.a.createElement("li",{className:"navItem",onClick:e.selectNav},"Messages"===e.selected?s.a.createElement(b.a,{to:"/dashboard/messages",className:"text select"},"Messages"):s.a.createElement(b.a,{to:"/dashboard/messages",className:"text"},"Messages")),s.a.createElement("li",{className:"navItem",onClick:e.selectNav},"Settings"===e.selected?s.a.createElement(b.a,{to:"/dashboard/settings",className:"text select"},"Settings"):s.a.createElement(b.a,{to:"/dashboard/settings",className:"text"},"Settings"))),s.a.createElement(L,{categories:e.categories})):s.a.createElement("div",{className:"navTitle"},"Log in for more!"))},U=(a(66),a(67),function(e){var t=new Date(e.postData.created_at);return s.a.createElement(b.a,{to:"/item/".concat(e.postData.id),className:"postContainer"},s.a.createElement("div",{className:"imgContainer"},e.postData.image[0]?s.a.createElement("img",{src:e.postData.image[0].url,alt:"",className:"img"}):s.a.createElement("img",{src:"https://s3-us-west-2.amazonaws.com/alexithemia-cms-imagestore/no-image.jpg",alt:"",className:"noImg"})),s.a.createElement("h2",{className:"title"}," ",e.postData.title," - ",e.postData.postStatus.name),s.a.createElement("div",{className:"textContainer"},s.a.createElement("div",{className:"price"},"$",e.postData.price),s.a.createElement("div",{className:"updatedAt"},"Posted: ",t.toUTCString())),s.a.createElement("div",{className:"viewContainer"},s.a.createElement("div",{className:"views"},"Views: ",e.postData.views)))}),R=function(e){var t=0,a=e.posts.map(function(e){return++t<=12?s.a.createElement(U,{key:e.id,postData:e}):null});return s.a.createElement(s.a.Fragment,null,a)},F=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){return this.props.loadPosts()}},{key:"render",value:function(){var e=this.props.posts;return s.a.createElement("div",{className:"homeContainer"},s.a.createElement("div",{className:"categoryContainer"},s.a.createElement("div",{className:"itemTitle"},s.a.createElement("h1",{className:"title"}," Trending ")),s.a.createElement("div",{className:"itemContainer"},s.a.createElement(R,{posts:e}))))}}]),t}(n.Component),B=F=Object(h.b)(function(e){return{posts:e.posts}},function(e){return{loadPosts:function(){var t=function(e){return fetch("/api/posts",{}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){return e({type:"LOAD_POSTS",payload:t})})};return e(t)}}})(F),G=(a(68),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={userInput:"",passwordInput:""},a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target.value;switch(e.target.name){case"username":this.setState({userInput:t});break;case"password":this.setState({passwordInput:t})}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={};a.username=this.state.userInput,a.password=this.state.passwordInput,this.props.login(a).then(function(){t.props.history.push("/")}),this.setState({userInput:"",passwordInput:""})}},{key:"render",value:function(){return s.a.createElement("div",{className:"loginContainer"},s.a.createElement("div",{className:"titleContainer"},s.a.createElement("h1",{className:"title"},"Login:")),s.a.createElement("form",null,s.a.createElement("div",null,s.a.createElement("label",{name:"username"}," Username: "),s.a.createElement("input",{type:"text",name:"username",value:this.state.userInput,onChange:this.handleInputChange})),s.a.createElement("div",null,s.a.createElement("label",{name:"password"},"Password: "),s.a.createElement("input",{type:"password",name:"password",value:this.state.passwordInput,onChange:this.handleInputChange})),s.a.createElement("div",{className:"btnContainer"},s.a.createElement("button",{className:"btn",onClick:this.handleSubmit},"LOGIN")),s.a.createElement("div",{className:"registerLink"},s.a.createElement(b.a,{to:"/register",className:"link"},"Need an account?"))))}}]),t}(n.Component)),W=G=Object(h.b)(function(e){return{user:e.cmsReducer}},function(e){return{login:function(t){return e(function(e){return function(t){return fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return localStorage.setItem("loggedIn",!0),localStorage.setItem("username",e.username),localStorage.setItem("id",e.id),localStorage.setItem("isadmin",e.is_admin),t({type:"LOGIN_USER",payload:e})}).catch(function(e){console.log(e)})}}(t))}}})(G),V=(a(69),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={userInput:"",emailInput:"",passwordInput:"",firstNameInput:"",lastNameInput:""},a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target.value;switch(e.target.name){case"username":this.setState({userInput:t});break;case"email":this.setState({emailInput:t});break;case"password":this.setState({passwordInput:t});break;case"first_name":this.setState({firstNameInput:t});break;case"last_name":this.setState({lastNameInput:t})}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={};a.username=this.state.userInput,a.email=this.state.emailInput,a.password=this.state.passwordInput,a.first_name=this.state.firstNameInput,a.last_name=this.state.lastNameInput,this.props.register(a).then(function(){t.props.history.push("/login")}),this.setState({userInput:"",emailInput:"",passwordInput:"",firstNameInput:"",lastNameInput:""})}},{key:"render",value:function(){return s.a.createElement("div",{className:"registerContainer"},s.a.createElement("div",{className:"titleContainer"},s.a.createElement("h1",{className:"title"},"Register Here:")),s.a.createElement("form",null,s.a.createElement("div",null,s.a.createElement("label",null," Username: "),s.a.createElement("input",{type:"text",name:"username",value:this.state.userInput,onChange:this.handleInputChange})),s.a.createElement("div",null,s.a.createElement("label",null,"Password: "),s.a.createElement("input",{type:"password",name:"password",value:this.state.passwordInput,onChange:this.handleInputChange})),s.a.createElement("div",null,s.a.createElement("label",null," Email: "),s.a.createElement("input",{type:"text",name:"email",value:this.state.emailInput,onChange:this.handleInputChange})),s.a.createElement("div",null,s.a.createElement("label",null," First Name: "),s.a.createElement("input",{type:"text",name:"first_name",value:this.state.firstNameInput,onChange:this.handleInputChange})),s.a.createElement("div",null,s.a.createElement("label",null," Last Name: "),s.a.createElement("input",{type:"text",name:"last_name",value:this.state.lastNameInput,onChange:this.handleInputChange})),s.a.createElement("div",{className:"btnContainer"},s.a.createElement("button",{className:"btn",onClick:this.handleSubmit},"REGISTER")),s.a.createElement("div",{className:"loginLink"},s.a.createElement(b.a,{to:"/login",className:"link"},"Already have an account?"))))}}]),t}(n.Component)),H=V=Object(h.b)(function(e){return{}},function(e){return{register:function(t){return e(function(e){return function(t){return fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"REGISTER_USER",payload:e})}).catch(function(e){console.log(e)})}}(t))}}})(V),Y=(a(70),function(e){var t=e.posts.map(function(e){return s.a.createElement(U,{key:e.id,postData:e})});return s.a.createElement(s.a.Fragment,null,t)}),J=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"searchContainer"},s.a.createElement("div",{className:"itemTitle"},s.a.createElement("h1",{className:"title"}," Search results for ",this.props.match.params.term," ")),this.props.posts.length>0?s.a.createElement("div",{className:"itemContainer"},s.a.createElement(Y,{posts:this.props.posts})):s.a.createElement("div",{className:"noResult"},"No results"))}}]),t}(n.Component),X=J=Object(h.b)(function(e){return{posts:e.posts}},function(e){return{}})(J),q=a(41),K=(a(82),function(e){return s.a.createElement("img",{src:e.url,alt:"",className:"navImg",onClick:e.changePhoto})}),$=function(e){var t=e.images.map(function(t){return s.a.createElement(K,{key:t.id,url:t.url,changePhoto:e.changePhoto})});return s.a.createElement(s.a.Fragment,null,t)},z=a(13),Q=(a(83),function(e){var t=e.id,a=e.name;return s.a.createElement("option",{value:t},"Status - ",a)}),Z=function(e){var t=e.postStatuses.map(function(e){return s.a.createElement(Q,{key:e.id,id:e.id,name:e.name})});return s.a.createElement(s.a.Fragment,null,t)},ee=(a(84),function(e){return s.a.createElement("div",{className:"editImgBox"},s.a.createElement("img",{src:e.url,alt:"",className:"editImg",onClick:e.deleteImg,"data-id":e.id}))}),te=(a(85),function(e){var t=e.images.map(function(t){return s.a.createElement(ee,{key:t.id,id:t.id,url:t.url,deleteImg:e.deleteImg})});return s.a.createElement("div",{className:"editImgList"},t)}),ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={title:a.props.post.title,description:a.props.post.decsription,price:a.props.post.price,photos:[],manufacturer:a.props.post.manufacturer,model:a.props.post.model,dimensions:a.props.post.dimensions,notes:a.props.post.notes,category_id:a.props.post.category_id,condition_id:a.props.post.post_condition_id,post_status_id:a.props.post.post_status_id,isTitleInvalid:!1,isCategoryInvalid:!1,isConditionInvalid:!1,deleteImages:[]},a.handleTitleOnChange=a.handleTitleOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleDescriptionOnChange=a.handleDescriptionOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handlePriceOnChange=a.handlePriceOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleManufacturerOnChange=a.handleManufacturerOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleModelOnChange=a.handleModelOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleDimensionsOnChange=a.handleDimensionsOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleNotesOnChange=a.handleNotesOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleFileChosenOnChange=a.handleFileChosenOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleCategoryOnChange=a.handleCategoryOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleConditionOnChange=a.handleConditionOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleStatusOnChange=a.handleStatusOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleOnSubmit=a.handleOnSubmit.bind(Object(m.a)(Object(m.a)(a))),a.checkTitleValid=a.checkTitleValid.bind(Object(m.a)(Object(m.a)(a))),a.handleImageClick=a.handleImageClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){return this.props.loadFormData()}},{key:"handleTitleOnChange",value:function(e){var t=e.target.value;this.setState({title:t})}},{key:"checkTitleValid",value:function(){this.state.title.length<2?this.setState({isTitleInvalid:!0}):this.setState({isTitleInvalid:!1})}},{key:"handleDescriptionOnChange",value:function(e){var t=e.target.value;this.setState({description:t})}},{key:"handlePriceOnChange",value:function(e){var t=e.target.value;this.setState({price:t})}},{key:"handleManufacturerOnChange",value:function(e){var t=e.target.value;this.setState({manufacturer:t})}},{key:"handleModelOnChange",value:function(e){var t=e.target.value;this.setState({model:t})}},{key:"handleDimensionsOnChange",value:function(e){var t=e.target.value;this.setState({dimensions:t})}},{key:"handleNotesOnChange",value:function(e){var t=e.target.value;this.setState({notes:t})}},{key:"handleFileChosenOnChange",value:function(e){var t=e.target.files;this.setState({photos:t})}},{key:"handleCategoryOnChange",value:function(e){var t=this,a=e.target.value;this.setState({category_id:a},function(){""===t.state.category_id?t.setState({isCategoryInvalid:!0}):t.setState({isCategoryInvalid:!1})})}},{key:"handleConditionOnChange",value:function(e){var t=this,a=e.target.value;this.setState({condition_id:a},function(){""===t.state.condition_id?t.setState({isConditionInvalid:!0}):t.setState({isConditionInvalid:!1})})}},{key:"handleStatusOnChange",value:function(e){var t=e.target.value;this.setState({post_status_id:t})}},{key:"handleImageClick",value:function(e){var t=e.target.dataset.id,a=e.target;-1===this.state.deleteImages.indexOf(t)?this.setState({deleteImages:[].concat(Object(z.a)(this.state.deleteImages),[t])},function(){a.classList.add("removed")}):(this.state.deleteImages.splice(this.state.deleteImages.indexOf(t),1),a.classList.remove("removed"))}},{key:"handleOnSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.title,s=a.description,r=a.price,i=a.photos,o=a.manufacturer,c=a.model,l=a.dimensions,d=a.notes,u=a.category_id,m=a.condition_id,h=a.post_status_id,p=a.deleteImages;this.props.onEdit({id:this.props.post.id,title:n,description:s,price:r,photos:i,manufacturer:o,model:c,dimensions:l,notes:d,category_id:u,post_condition_id:m,post_status_id:h,deleteImages:p}).then(function(){t.props.history.push("/"),t.props.history.push("/item/".concat(t.props.post.id))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.description,n=e.price,r=e.manufacturer,i=e.model,o=e.dimensions,c=e.notes,l=e.isTitleInvalid,d=e.isCategoryInvalid,u=e.isConditionInvalid;return s.a.createElement("div",{className:"form-wrap"},s.a.createElement("form",{id:"add-post-form",encType:"multipart/form-data"},s.a.createElement("div",{className:"left-half"},s.a.createElement("input",{onChange:this.handleTitleOnChange,onKeyUp:this.checkTitleValid,type:"text",value:t,placeholder:"Title"}),s.a.createElement("textarea",{onChange:this.handleDescriptionOnChange,name:"description",value:a,placeholder:"Describe your post",cols:"30",rows:"10"}),s.a.createElement("input",{onChange:this.handlePriceOnChange,type:"text",value:n,placeholder:"Name your price"}),s.a.createElement("input",{onChange:this.handleManufacturerOnChange,type:"text",value:r,placeholder:"Manufacturer (Optional)"}),s.a.createElement("input",{onChange:this.handleModelOnChange,type:"text",value:i,placeholder:"Model (Optional)"}),s.a.createElement("input",{onChange:this.handleDimensionsOnChange,type:"text",value:o,placeholder:"Product dimensions (Optional)"}),s.a.createElement("input",{onChange:this.handleNotesOnChange,type:"text",value:c,placeholder:"Notes: Any last words?"})),s.a.createElement("div",{className:"right-half"},s.a.createElement("span",{className:"text"},"Delete Images"),s.a.createElement("div",{className:"imgEditBox"},s.a.createElement(te,{images:this.props.post.image,deleteImg:this.handleImageClick}),s.a.createElement("div",{className:"uploadImg"},s.a.createElement("span",{className:"addImgText"},"Upload an image (max 6)"),s.a.createElement("img",{className:"sampleImg",src:"https://i.imgur.com/cFxAsBo.png",alt:"file not specified"}),s.a.createElement("input",{onChange:this.handleFileChosenOnChange,type:"file",form:"add-post-form",multiple:!0}))),s.a.createElement("select",{onChange:this.handleCategoryOnChange,name:"category_id",id:"select-category",defaultValue:this.props.post.category_id},s.a.createElement("option",{value:""},"Choose a Category"),s.a.createElement(_,{categories:this.props.categories})),s.a.createElement("select",{onChange:this.handleConditionOnChange,name:"condition_id",id:"select-conditions",defaultValue:this.props.post.post_condition_id},s.a.createElement("option",{value:""},"Choose a Condition"),s.a.createElement(D,{postConditions:this.props.postConditions})),s.a.createElement("select",{onChange:this.handleStatusOnChange,name:"status_id",id:"select-conditions",defaultValue:this.props.post.post_status_id},s.a.createElement(Z,{postStatuses:this.props.statuses})))),s.a.createElement("div",{className:"submit-wrap"},d||u||l?s.a.createElement("input",{className:"disabled",type:"submit",value:"SUBMIT",form:"add-post-form",disabled:!0}):s.a.createElement("input",{onClick:this.handleOnSubmit,type:"submit",value:"SUBMIT",form:"add-post-form"})))}}]),t}(n.Component);ae=Object(h.b)(function(e){return{postConditions:e.postConditions,categories:e.categories,statuses:e.postStatuses}},function(e){return{loadFormData:function(){var t=E();return e(t)},onEdit:function(t){var a,n=(a=t,function(e){var t=new FormData;for(var n in a)t.append(n,a[n]);for(var s=0;s<a.photos.length;s++)t.append("photos",a.photos[s]);for(var r=0;r<a.deleteImages.length;r++)t.append("delete",a.deleteImages[r]);return fetch("/api/posts/".concat(a.id),{method:"PUT",body:t}).then(function(e){return e.json()}).then(function(t){e({type:"EDIT_POST",payload:t})})});return e(n)}}})(ae);var ne=Object(y.a)(ae),se=a(38),re=(a(86),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={to_user_id:a.props.selectedPost.user_id,post_id:a.props.selectedPost.id,body:""},a.updateInput=a.updateInput.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"updateInput",value:function(e){var t=e.target.value,a=e.target.dataset.field;this.setState(Object(se.a)({},a,t))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.toggleModal,a=this.state,n=a.to_user_id,s=a.post_id,r=a.body;this.props.onSendMessage({to_user_id:n,post_id:s,body:r}).then(function(){t()})}},{key:"render",value:function(){return s.a.createElement("div",{className:"message-wrap"},s.a.createElement("div",{className:"message-header-wrap"},s.a.createElement("div",{className:"form-header-wrap"},s.a.createElement("div",{className:"form-header"},"Send a Message: ",s.a.createElement("span",{className:"accent-text"},"Start a conversation.")),s.a.createElement("div",{className:"text"},"Are you interested in purchasing this product? Let's talk!"))),s.a.createElement("div",{className:"messageDetails"},s.a.createElement("div",{className:"detail"},"Message to: ",this.props.selectedPost.user.username),s.a.createElement("div",{className:"detail"},"Concerning: ",this.props.selectedPost.title)),s.a.createElement("form",{id:"form-message"},s.a.createElement("div",{className:"form-comment"},s.a.createElement("span",{className:"title"},"HOW'S IT GOING?"),s.a.createElement("textarea",{onChange:this.updateInput,"data-field":"body",value:this.state.body,name:"comment",cols:"30",rows:"10",placeholder:"Hey, I'm looking to buy your product. Where can we meet?"})),s.a.createElement("div",{className:"form-submit-options"},s.a.createElement("input",{onClick:this.handleSubmit,className:"submit-send",type:"submit",value:"Send Message"}))),s.a.createElement("button",{onClick:this.props.toggleModal,className:"submit-close"},"Close"))}}]),t}(n.Component)),ie=re=Object(h.b)(function(e){return{selectedPost:e.selectedPost,id:e.id,isAdmin:e.isAdmin}},function(e){return{onSendMessage:function(t){var a=O(t);return e(a)}}})(re),oe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={showEditModal:!1,showMessageModal:!1,selectedImg:""},a.toggleModal=a.toggleModal.bind(Object(m.a)(Object(m.a)(a))),a.handleToggleModal=a.handleToggleModal.bind(Object(m.a)(Object(m.a)(a))),a.changePhoto=a.changePhoto.bind(Object(m.a)(Object(m.a)(a))),a.deletePost=a.deletePost.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.loadPost(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(){""===this.state.selectedImg&&this.props.selectedPost.image&&(this.props.selectedPost.image[0]?this.setState({selectedImg:this.props.selectedPost.image[0].url}):this.setState({selectedImg:"https://s3-us-west-2.amazonaws.com/alexithemia-cms-imagestore/no-image.jpg"}))}},{key:"toggleModal",value:function(){return this.setState({showMessageModal:!this.state.showMessageModal})}},{key:"handleToggleModal",value:function(){this.setState({showEditModal:!this.state.showEditModal})}},{key:"changePhoto",value:function(e){this.setState({selectedImg:e.target.src})}},{key:"deletePost",value:function(){var e=this;this.props.onDelete(this.props.selectedPost.id).then(function(){e.props.history.push("/")})}},{key:"render",value:function(){var e=this.props.selectedPost,t=e.category,a=e.description,n=e.dimensions,r=e.image,i=e.manufacturer,o=e.model,c=e.title,l=e.price,d=e.postCondition,u=e.postStatus,m=e.user,h=e.notes,p=e.views,g=e.created_at,v=e.updated_at,f=e.user_id,E=this.props,O=E.id,y=E.isAdmin;return s.a.createElement("div",{className:"itemDetailViewContainer"},this.props.selectedPost.user&&s.a.createElement("div",null,s.a.createElement("div",{className:"mainContainer"},s.a.createElement("div",{className:"imgNavBar"},s.a.createElement($,{images:r,changePhoto:this.changePhoto})),s.a.createElement("div",{className:"imgBox"},s.a.createElement(q.a,{smallImage:{alt:"",isFluidWidth:!0,src:this.state.selectedImg},largeImage:{src:this.state.selectedImg,width:800,height:400}})),s.a.createElement("div",{className:"titleContainer"},s.a.createElement("h1",{className:"title"},c,": ",u.name),s.a.createElement("div",{className:"user"},"by ",m.username),s.a.createElement("div",{className:"descriptionContainer"},s.a.createElement("div",{className:"price"},"Price: ",s.a.createElement("span",{className:"dynamic-data"},"$",l)),s.a.createElement("div",{className:"category"},"Category: ",s.a.createElement("span",{className:"dynamic-data"},t.name)),s.a.createElement("div",{className:"description"},"Description: ",s.a.createElement("span",{className:"dynamic-data"},a)),s.a.createElement("div",{className:"posted"},"Posted: ",s.a.createElement("span",{className:"dynamic-data"},g)),s.a.createElement("div",{className:"updated"},"Last updated: ",s.a.createElement("span",{className:"dynamic-data"},v)),s.a.createElement("div",{className:"notes"},"Note: ",s.a.createElement("span",{className:"dynamic-data"},h)),s.a.createElement("div",{className:"views"},"Viewed: ",s.a.createElement("span",{className:"dynamic-data"},p," times")),f===O||y?s.a.createElement("div",{className:"options"},s.a.createElement("div",{onClick:this.handleToggleModal,className:"editPost"},"Edit"),s.a.createElement(k.a,{isOpen:this.state.showEditModal,contentLabel:"modal",onRequestClose:this.handleToggleModal,className:"modal",overlayClassName:"overlay",shouldCloseOnOverlayClick:!0,ariaHideApp:!1},s.a.createElement("div",{className:"headerContainer"},s.a.createElement("span",{className:"headerText"},"EDIT POST")),s.a.createElement(ne,{closeModal:this.handleToggleModal,post:this.props.selectedPost})),s.a.createElement("div",{className:"deletePost",onClick:this.deletePost},"Delete")):s.a.createElement("div",{className:"options"},s.a.createElement("div",{className:"messagePosterContainer"},s.a.createElement("button",{onClick:this.toggleModal,className:"messagePoster"},"Message Me"),this.props.loggedIn?s.a.createElement(k.a,{isOpen:this.state.showMessageModal,onRequestClose:this.toggleModal,className:"message-modal",overlayClassName:"overlay",shouldCloseOnOverlayClick:!0,ariaHideApp:!1},s.a.createElement(ie,{toggleModal:this.toggleModal})):s.a.createElement(k.a,{isOpen:this.state.showMessageModal,onRequestClose:this.toggleModal,className:"login-message-modal",overlayClassName:"overlay",shouldCloseOnOverlayClick:!0,ariaHideApp:!1},s.a.createElement(b.a,{to:"/login",className:"loginLink"},"Please log in to send a message"))))))),s.a.createElement("div",{className:"secondContainer"},s.a.createElement("h2",{className:"descriptionTitle"},"Product description"),s.a.createElement("div",{className:"productDescription"},s.a.createElement("div",{className:"condition"},"Condition: ",s.a.createElement("span",{className:"dynamic-data"},d.name)),s.a.createElement("div",{className:"manufacturer"},"Manufacturer: ",s.a.createElement("span",{className:"dynamic-data"},i)),s.a.createElement("div",{className:"model"},"Model: ",s.a.createElement("span",{className:"dynamic-data"},o)),s.a.createElement("div",{className:"dimension"},"Dimensions: ",s.a.createElement("span",{className:"dynamic-data"},n))))))}}]),t}(n.Component),ce=oe=Object(h.b)(function(e){return{selectedPost:e.selectedPost,id:e.id,isAdmin:e.isAdmin,loggedIn:e.loggedIn}},function(e){return{loadPost:function(t){var a=function(e){return function(t){return fetch("/api/posts/".concat(e),{}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"LOAD_POST",payload:e})})}}(t);return e(a)},onDelete:function(t){var a=function(e){return function(t){return fetch("/api/posts/".concat(e),{method:"DELETE"}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"DELETE_POST",payload:e})})}}(t);return e(a)}}})(oe),le=(a(87),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.loadCategory(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.props.loadCategory(this.props.match.params.id)}},{key:"render",value:function(){for(var e="",t=0;t<this.props.categories.length;t++)0!==this.props.categories[t].id&&this.props.categories[t].id===parseInt(this.props.match.params.id)&&(e=this.props.categories[t].name);return s.a.createElement("div",{className:"homeContainer"},s.a.createElement("div",{className:"categoryContainer"},s.a.createElement("div",{className:"itemTitle"},s.a.createElement("h1",{className:"title"},e)),s.a.createElement("div",{className:"itemContainer"},s.a.createElement(Y,{posts:this.props.posts}))))}}]),t}(n.Component)),de=le=Object(h.b)(function(e){return{posts:e.posts,categories:e.categories}},function(e){return{loadCategory:function(t){var a=function(e){return function(t){return fetch("/api/category/".concat(e),{}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"LOAD_CATEGORY",payload:e})})}}(t);return e(a)}}})(le),ue=(a(88),a(89),a(90),function(e){var t=e.postData,a=t.id,n=t.description,r=t.dimensions,i=t.image,o=t.manufacturer,c=t.model,l=t.notes,d=t.postCondition,u=t.postStatus,m=t.price,h=t.title,p=t.created_at,g=t.user,v=t.views;return s.a.createElement("div",{className:"user-post"},s.a.createElement("div",{className:"post-container"},s.a.createElement(b.a,{to:"/item/".concat(a),className:"post-image-container"},s.a.createElement("img",{src:0===i.length?"https://i.imgur.com/IeBLmWd.png":i[0].url,alt:""})),s.a.createElement("div",{className:"content"},s.a.createElement(b.a,{to:"/item/".concat(a),className:"post-data",id:"post-title"},h),s.a.createElement("div",{className:"post-data"},s.a.createElement("span",{className:"text-highlight"},n)),l?s.a.createElement("div",{className:"post-data"},"Notes: ",s.a.createElement("span",{className:"text-highlight"},l)):null,s.a.createElement("div",{className:"post-data"},"Price: ",s.a.createElement("span",{className:"text-highlight"},"$",m)),s.a.createElement("div",{className:"post-data"},"Condition: ",s.a.createElement("span",{className:"text-highlight"},d.name)),s.a.createElement("div",{className:"post-data"},"Status: ",s.a.createElement("span",{className:"text-highlight"},u.name)),r?s.a.createElement("div",{className:"post-data"},"Dimensions: ",s.a.createElement("span",{className:"text-highlight"},r)):null,o?s.a.createElement("div",{className:"post-data"},"Manufacturer: ",s.a.createElement("span",{className:"text-highlight"},o)):null,c?s.a.createElement("div",{className:"post-data"},"Model: ",s.a.createElement("span",{className:"text-highlight"},c)):null,s.a.createElement("div",{className:"post-data"},"By: ",s.a.createElement("span",{className:"text-highlight"},g.username)),s.a.createElement("div",{className:"post-data"},"Viewed: ",s.a.createElement("span",{className:"text-highlight"},v," times")),s.a.createElement("div",{className:"post-data"},"Created: ",s.a.createElement("span",{className:"text-highlight"},new Date(p).toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric",year:"numeric"}))))))}),me=function(e){var t=e.posts.map(function(e){var t=e.id;return s.a.createElement(ue,{key:t,postData:e})});return s.a.createElement("div",{className:"sorted"},s.a.createElement("div",{className:"section-title"},e.title),0===t.length?s.a.createElement("div",{className:"no-items"},"No items available."):s.a.createElement("div",{className:"posts"},t))},he=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={newPost:{}},a.sortPostsByStatusId=a.sortPostsByStatusId.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"sortPostsByStatusId",value:function(e){return this.props.posts.filter(function(t){var a=t.post_status_id;return e===a})}},{key:"componentDidMount",value:function(){this.props.loadStatuses(),this.props.loadPostsByUser()}},{key:"render",value:function(){return s.a.createElement("div",{className:"your-posts"},s.a.createElement("div",{className:"pending-wrap"},s.a.createElement(me,{title:"Pending Items",posts:this.sortPostsByStatusId(1)})),s.a.createElement("div",{className:"current-wrap"},s.a.createElement(me,{title:"Items on Sale",posts:this.sortPostsByStatusId(2)})),s.a.createElement("div",{className:"sold-wrap"},s.a.createElement(me,{title:"Sold Items",posts:this.sortPostsByStatusId(3)})))}}]),t}(n.Component),pe=he=Object(h.b)(function(e){return{postStatuses:e.postStatuses,posts:e.posts}},function(e){return{loadStatuses:function(){var t=E();return e(t)},loadPostsByUser:function(){var t=function(e){return fetch("/api/posts/user-posts").then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){return e({type:"LOAD_USER_POSTS",payload:t})})};return e(t)}}})(he),ge=(a(91),a(92),function(e){var t=e.id,a=e.username,n=e.unread;return s.a.createElement(s.a.Fragment,null,n?s.a.createElement("div",{className:"userMessageWrap unread"},s.a.createElement("div",{onClick:e.delete,className:"deleteThreadBtn","data-userid":t},"X"),s.a.createElement(b.a,{to:"/dashboard/messages/".concat(t),className:"userMessageDataWrap"},s.a.createElement("div",null,"From: ",a),s.a.createElement("div",null,"Latest Message: ",Date(e.created_at)))):s.a.createElement("div",{className:"userMessageWrap"},s.a.createElement("div",{onClick:e.delete,className:"deleteThreadBtn","data-userid":t},"X"),s.a.createElement(b.a,{to:"/dashboard/messages/".concat(t),className:"userMessageDataWrap"},s.a.createElement("div",null,"From: ",a),s.a.createElement("div",null,"Latest Message: ",Date(e.created_at)))))}),ve=function(e){var t=e.userList.map(function(t){return s.a.createElement(ge,{key:t.from_user_id,id:t.from_user_id,created_at:t.created_at,username:t.username,unread:t.unread,delete:e.delete})});return s.a.createElement(s.a.Fragment,null,t)},fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).deleteThread=a.deleteThread.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.loadYourMessages()}},{key:"deleteThread",value:function(e){this.props.onDeleteThread(e.target.dataset.userid)}},{key:"render",value:function(){return s.a.createElement("div",{className:"messages-wrap"},s.a.createElement("h2",null,"Messages"),s.a.createElement(ve,{userList:this.props.userMessages,delete:this.deleteThread}))}}]),t}(n.Component),Ee=fe=Object(h.b)(function(e){return{userMessages:e.userMessages}},function(e){return{loadYourMessages:function(){var t=function(e){return fetch("/api/messages").then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){return e({type:"LOAD_USERMESSAGES",payload:t})})};return e(t)},onDeleteThread:function(t){var a=function(e){return function(t){return fetch("/api/messages/".concat(e),{method:"DELETE"}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"DELETE_THREAD",payload:e})})}}(t);return e(a)}}})(fe),Oe=(a(93),a(94),function(e){var t=e.message,a=t.id,n=t.from_user_id,r=t.to_user_id,i=t.created_at,o=t.body,c=e.message.post.title;return s.a.createElement(s.a.Fragment,null,n===parseInt(e.userId)?s.a.createElement("div",{className:"message yours"},s.a.createElement("div",{onClick:e.delete,className:"deleteMessageButton","data-messageid":a,"data-userid":r},"X"),s.a.createElement("div",{className:"messageHead"},s.a.createElement("div",null,"TO: ",e.message.toUser.username),s.a.createElement("div",null,"Concerning Post: ",c)),s.a.createElement("div",{className:"sent"},"Sent: ",i),s.a.createElement("div",{className:"bodyWrap"},"Message:",s.a.createElement("div",null,o))):s.a.createElement("div",{className:"message"},s.a.createElement("div",{onClick:e.delete,className:"deleteMessageButton","data-messageid":a,"data-userid":n},"X"),s.a.createElement("div",{className:"messageHead"},s.a.createElement("div",null,"TO: ",e.message.toUser.username),s.a.createElement("div",null,"Concerning Post: ",c)),s.a.createElement("div",{className:"sent"},"Sent: ",i),s.a.createElement("div",{className:"bodyWrap"},"Message:",s.a.createElement("div",null,o))))}),be=function(e){var t=e.conversation.map(function(t){return s.a.createElement(Oe,{key:t.id,message:t,userId:e.userId,delete:e.delete})});return s.a.createElement(s.a.Fragment,null,t)},ye=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={body:""},a.handleBodyOnChange=a.handleBodyOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a.deleteMessage=a.deleteMessage.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.loadConversation(this.props.match.params.id)}},{key:"handleBodyOnChange",value:function(e){var t=e.target.value;this.setState({body:t})}},{key:"deleteMessage",value:function(e){this.props.onDelete({messageId:e.target.dataset.messageid,id:parseInt(e.target.dataset.userid)})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSend({body:this.state.body,post_id:this.props.conversation[this.props.conversation.length-1].post_id,to_user_id:this.props.match.params.id}),this.setState({body:""})}},{key:"render",value:function(){return s.a.createElement("div",{className:"conversation-wrap"},s.a.createElement(be,{conversation:this.props.conversation,userId:this.props.userId,delete:this.deleteMessage}),s.a.createElement("form",{className:"replyForm"},s.a.createElement("div",null,"Reply"),s.a.createElement("textarea",{className:"reply",onChange:this.handleBodyOnChange,name:"body",cols:"60",rows:"10",value:this.state.body,autoFocus:!0}),s.a.createElement("input",{type:"submit",className:"sendButton",onClick:this.handleSubmit,value:"Send"})))}}]),t}(n.Component),Ce=ye=Object(h.b)(function(e){return{conversation:e.conversation,userId:e.id}},function(e){return{loadConversation:function(t){var a=function(e){return function(t){return fetch("/api/messages/".concat(e)).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"LOAD_CONVERSATION",payload:e})})}}(t);return e(a)},onSend:function(t){var a=O(t);return e(a)},onDelete:function(t){var a=function(e){return function(t){return fetch("/api/messages/delete/".concat(e.messageId),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"DELETE_MESSAGE",payload:e})})}}(t);return e(a)}}})(ye),Ne=(a(95),function(e){var t=e.users.map(function(e){var t=new Date(e.created_at);return s.a.createElement("li",{key:e.id,className:"numbered-list-users"},s.a.createElement("div",{className:"content-data"},e.username,s.a.createElement("button",{className:"msg"},"msg")),s.a.createElement("div",{className:"content-data"},e.postByUser.length),s.a.createElement("div",{className:"content-data"},e.verified?"true":"false"),s.a.createElement("div",{className:"content-data"},e.status.name,s.a.createElement("button",{className:"block"},"block")),s.a.createElement("div",{className:"content-data"},t.toUTCString()))});return s.a.createElement(s.a.Fragment,null,t)}),je=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"render",value:function(){var e=this.props.users;return s.a.createElement("div",{className:"mainContainer"},s.a.createElement("div",{className:"div"},s.a.createElement("div",{className:"titleContainer"},s.a.createElement("h1",{className:"title"},"List of Users")),s.a.createElement("div",{className:"contentContainer"},s.a.createElement("div",{className:"userContainer"},s.a.createElement("ol",{className:"user-list"},s.a.createElement("li",{className:"titleContainer"},s.a.createElement("div",{className:"contentTitle content-data"},"Users"),s.a.createElement("div",{className:"contentTitle content-data"},"Items"),s.a.createElement("div",{className:"contentTitle content-data"},"Verified"),s.a.createElement("div",{className:"contentTitle content-data"},"Status"),s.a.createElement("div",{className:"contentTitle content-data"},"Created")),s.a.createElement(Ne,{users:e}))))))}}]),t}(n.Component),Se=je=Object(h.b)(function(e){return{users:e.users}},function(e){return{loadUsers:function(){var t=function(e){return fetch("/api/users/all").then(function(e){return e.json()}).then(function(t){return e({type:"LOAD_USER",payload:t.users})})};return e(t)}}})(je),Ie=(a(96),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={categoryName:a.props.name,id:a.props.id},a.editCategory=a.editCategory.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"editCategory",value:function(e){var t=e.target.value;switch(e.target.name){case"category":this.setState({categoryName:t})}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={};a.id=this.state.id,a.name=this.state.categoryName,this.props.editCategories(a).then(function(){t.props.close()})}},{key:"render",value:function(){return s.a.createElement("div",{className:"editFormContainer"},s.a.createElement("div",{className:"headerContainer"},s.a.createElement("span",{className:"headerText"},"EDIT CATEGORY: ",this.props.name)),s.a.createElement("div",{className:"formContainer"},s.a.createElement("form",{className:"edit-form"},s.a.createElement("div",{className:"category-name"}," Name:",s.a.createElement("input",{type:"text",name:"category",className:"category",onChange:this.editCategory,value:this.state.categoryName})),s.a.createElement("div",{className:"button-container"},s.a.createElement("button",{className:"submit",onClick:this.handleSubmit},"SUBMIT")))))}}]),t}(n.Component)),ke=Ie=Object(h.b)(function(e){return{categories:e.categories}},function(e){return{editCategories:function(t){var a,n=(a=t,function(e){return fetch("/api/category/".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){e({type:"EDIT_CATEGORY",payload:t})})});return e(n)}}})(Ie),Te=(a(97),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={categoryName:""},a.addNewCategory=a.addNewCategory.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"addNewCategory",value:function(e){var t=e.target.value;switch(e.target.name){case"category":this.setState({categoryName:t})}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={};t.name=this.state.categoryName,this.props.addCategory(t),this.setState({categoryName:""})}},{key:"render",value:function(){return s.a.createElement("div",{className:"addFormContainer"},s.a.createElement("h1",{className:"addTitle"},"ADD NEW CATEGORY HERE"),s.a.createElement("form",{className:"add-category"},s.a.createElement("div",{className:"name"},"NAME:",s.a.createElement("input",{type:"text",name:"category",className:"add",value:this.state.categoryName,onChange:this.addNewCategory})),s.a.createElement("button",{className:"submit",onClick:this.handleSubmit},"SUBMIT")))}}]),t}(n.Component)),_e=Te=Object(h.b)(function(e){return{categories:e.categories}},function(e){return{addCategory:function(t){var a=function(e){return function(t){return fetch("/api/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t({type:"ADD_CATEGORY",payload:e})})}}(t);return e(a)}}})(Te),Me=(a(98),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={editModal:!1,id:"",categoryName:""},a.toggleModal=a.toggleModal.bind(Object(m.a)(Object(m.a)(a))),a.closeModal=a.closeModal.bind(Object(m.a)(Object(m.a)(a))),a.deleteOnSubmit=a.deleteOnSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.loadCategories()}},{key:"toggleModal",value:function(e){this.setState({id:e.target.dataset.id,categoryName:e.target.dataset.name,editModal:!this.state.editModal})}},{key:"closeModal",value:function(){this.setState({editModal:!1})}},{key:"deleteOnSubmit",value:function(e){this.props.deleteCategory(e.target.dataset.id)}},{key:"render",value:function(){var e=this,t=this.props.categories.map(function(t){var a=new Date(t.created_at),n=new Date(t.updated_at),r=t.id;return s.a.createElement("div",{key:r,className:"categoryContainer"},s.a.createElement("div",{className:"categoryName"},s.a.createElement("div",{className:"name"},t.name)),s.a.createElement("div",{className:"btn"},s.a.createElement("button",{className:"edit","data-id":r,"data-name":t.name,onClick:e.toggleModal},"Edit ")),s.a.createElement("div",{className:"btn"},s.a.createElement("button",{className:"delete",onClick:e.deleteOnSubmit,"data-id":r},"Delete")),s.a.createElement("div",{className:"category"},s.a.createElement("div",{className:"created_at"},"Created on: ",a.toDateString())),s.a.createElement("div",{className:"category"},s.a.createElement("div",{className:"updated_at"},"Last updated: ",n.toDateString())))});return s.a.createElement("div",{className:"editCategoryContainer"},s.a.createElement("div",{className:"titleContainer"},s.a.createElement("h1",{className:"title"},"Categories"),s.a.createElement("div",{className:"addCategoryContainer"},s.a.createElement(_e,{categories:this.props.categories}))),s.a.createElement("div",{className:"allCategoryContainer"},t),s.a.createElement(k.a,{isOpen:this.state.editModal,contentLabel:"edit-modal",onRequestClose:this.state.closeEditModal,className:"edit-modal",overlayClassName:"overlay",shouldCloseOnOverlayClick:!0,ariaHideApp:!1},s.a.createElement(ke,{id:this.state.id,name:this.state.categoryName,close:this.closeModal})))}}]),t}(n.Component)),De=Me=Object(h.b)(function(e){return{categories:e.categories}},function(e){return{loadCategories:function(){var t=f();return e(t)},deleteCategory:function(t){var a=function(e){return function(t){return fetch("/api/category/".concat(e),{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){t({type:"DELETE_CATEGORY",payload:e})})}}(t);return e(a)}}})(Me),we=(a(99),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={username:"",first_name:"",last_name:"",email:"",isUsernameInvalid:!0},a.handleUsernameOnChange=a.handleUsernameOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleFirstNameOnChange=a.handleFirstNameOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleLastNameOnChange=a.handleLastNameOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleEmailOnChange=a.handleEmailOnChange.bind(Object(m.a)(Object(m.a)(a))),a.handleOnSubmit=a.handleOnSubmit.bind(Object(m.a)(Object(m.a)(a))),a.componentDidMount=a.componentDidMount.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;return this.props.loadUserData().then(function(t){e.setState({username:t.payload.username,first_name:t.payload.first_name,last_name:t.payload.last_name,email:t.payload.email,isUsernameInvalid:!1})})}},{key:"handleUsernameOnChange",value:function(e){var t=e.target.value;this.setState({username:t})}},{key:"checkUsernameValid",value:function(){this.state.username.length<2?this.setState({isUsernameInvalid:!0}):this.setState({isUsernameInvalid:!1})}},{key:"handleFirstNameOnChange",value:function(e){var t=e.target.value;this.setState({first_name:t})}},{key:"handleLastNameOnChange",value:function(e){var t=e.target.value;this.setState({last_name:t})}},{key:"handleEmailOnChange",value:function(e){var t=e.target.value;this.setState({email:t})}},{key:"handleOnSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.username,s=a.first_name,r=a.last_name,i=a.email;this.props.onEdit({username:n,first_name:s,last_name:r,email:i}).then(function(){t.props.history.push("/")}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"form-wrap"},s.a.createElement("div",{className:"input-wrap"},s.a.createElement("label",null,"Username:"),s.a.createElement("input",{onChange:this.handleUsernameOnChange,onKeyUp:this.checkUsernameValid,type:"text",value:this.state.username}),s.a.createElement("label",null,"First Name:"),s.a.createElement("input",{onChange:this.handleFirstNameOnChange,type:"text",value:this.state.first_name}),s.a.createElement("label",null,"Last Name:"),s.a.createElement("input",{onChange:this.handleLastNameOnChange,type:"text",value:this.state.last_name}),s.a.createElement("label",null,"Email:"),s.a.createElement("input",{onChange:this.handleEmailOnChange,type:"text",value:this.state.email})),s.a.createElement("div",{className:"submit-wrap"},this.state.isUsernameInvalid?s.a.createElement("input",{className:"disabled",type:"submit",value:"SUBMIT",form:"add-post-form",disabled:!0}):s.a.createElement("input",{onClick:this.handleOnSubmit,type:"submit",value:"SUBMIT EDIT",form:"add-post-form"})))}}]),t}(n.Component));we=Object(h.b)(function(e){return{user:e.user}},function(e){return{loadUserData:function(){var t=function(e){return fetch("/api/users").then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(t){return e({type:"LOAD_USER",payload:t})})};return e(t)},onEdit:function(t){var a=function(e){return function(t){return fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){return t({type:"EDIT_USER",payload:e})})}}(t);return e(a)}}})(we);var xe=Object(y.a)(we),Pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={selectedRoute:""},a.selectNav=a.selectNav.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){return this.props.onLoad()}},{key:"selectNav",value:function(e){this.setState({selectedRoute:e.target.innerHTML})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(p.a,null,s.a.createElement(s.a.Fragment,null,s.a.createElement(S,{title:"CMS",isLoggedIn:this.props.isLoggedIn,username:this.props.username,selectNav:this.selectNav}),s.a.createElement("div",{className:"mainContainer"},s.a.createElement(A,{categories:this.props.categories,isLoggedIn:this.props.isLoggedIn,selected:this.state.selectedRoute,selectNav:this.selectNav}),s.a.createElement(g.a,null,s.a.createElement(v.a,{exact:!0,path:"/register",component:H}),s.a.createElement(v.a,{exact:!0,path:"/login",component:W}),s.a.createElement(v.a,{exact:!0,path:"/",component:B}),s.a.createElement(v.a,{exact:!0,path:"/dashboard/messages",component:Ee}),s.a.createElement(v.a,{exact:!0,path:"/dashboard/settings",component:xe}),s.a.createElement(v.a,{exact:!0,path:"/dashboard/messages/:id",component:Ce}),s.a.createElement(v.a,{exact:!0,path:"/category/:id",component:de}),s.a.createElement(v.a,{exact:!0,path:"/item/:id",component:ce}),s.a.createElement(v.a,{exact:!0,path:"/search/:term",component:X}),s.a.createElement(v.a,{exact:!0,path:"/dashboard/your-posts",component:pe}),s.a.createElement(v.a,{exact:!0,path:"/admin/users",component:Se}),s.a.createElement(v.a,{exact:!0,path:"/admin/categories",component:De}))))))}}]),t}(n.Component),Le=Pe=Object(h.b)(function(e){return{categories:e.categories,username:e.username,isLoggedIn:e.loggedIn}},function(e){return{onLoad:function(){var t=f();return e(t)}}})(Pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae=a(40);var Ue,Re={posts:[],selectedPost:{},categories:[],selectedCategory:[],postConditions:[],postStatuses:[],messages:[],users:[],user:{},userMessages:[],conversation:[],username:localStorage.getItem("username"),loggedIn:localStorage.getItem("loggedIn"),id:parseInt(localStorage.getItem("id")),isAdmin:(Ue=localStorage.getItem("isadmin"),"false"!==Ue&&("true"===Ue||void 0))},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object.assign({},e,{loggedIn:!0,username:t.payload.username,id:t.payload.id,isAdmin:t.payload.is_admin});case"LOGOUT_USER":return Object.assign({},e,{loggedIn:!1,username:""});case"LOAD_USER":return Object.assign({},e,{user:t.payload});case"LOAD_USER":return Object.assign({},e,{users:Object(z.a)(t.payload)});case"LOAD_CATEGORIES":return Object.assign({},e,{categories:Object(z.a)(t.payload)});case"LOAD_CATEGORY":return Object.assign({},e,{posts:Object(z.a)(t.payload)});case"ADD_CATEGORY":return Object.assign({},e,{categories:[].concat(Object(z.a)(e.categories),[t.payload.category])});case"EDIT_CATEGORY":case"DELETE_CATEGORY":return Object.assign({},e,{categories:Object(z.a)(t.payload)});case"LOAD_CONDITIONS":return Object.assign({},e,{postConditions:Object(z.a)(t.payload)});case"LOAD_STATUSES":return Object.assign({},e,{postStatuses:Object(z.a)(t.payload)});case"LOAD_POSTS":return Object.assign({},e,{posts:Object(z.a)(t.payload)});case"LOAD_POST":return Object.assign({},e,{selectedPost:t.payload});case"SEARCH_POST":case"LOAD_USER_POSTS":return Object.assign({},e,{posts:Object(z.a)(t.payload)});case"LOAD_USERMESSAGES":return Object.assign({},e,{userMessages:Object(z.a)(t.payload)});case"LOAD_CONVERSATION":return Object.assign({},e,{conversation:Object(z.a)(t.payload)});case"SEND_MESSAGE":return Object.assign({},e,{conversation:[].concat(Object(z.a)(e.conversation),[t.payload])});case"DELETE_MESSAGE":return Object.assign({},e,{conversation:Object(z.a)(t.payload)});case"DELETE_THREAD":return Object.assign({},e,{userMessages:Object(z.a)(t.payload)});default:return e}},Be=a(18),Ge=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Be.c)(Object(Be.a)(Ae.a)),We=Object(Be.d)(Fe,Ge);i.a.render(s.a.createElement(h.a,{store:We},s.a.createElement(Le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}]),[[42,1,2]]]);
//# sourceMappingURL=main.7e1ba876.chunk.js.map